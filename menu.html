<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>å¹¸ç¦é£Ÿå ‚ Menu</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: linear-gradient(180deg, #fff7e6, #ffe0b2);
      font-family: "Noto Sans TC", sans-serif;
      overflow: hidden;
    }

    .container-wrapper {
      height: 100vh;
      max-width: 430px;
      margin: auto;
      position: relative;
      overflow: hidden;
    }

    .screen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 40px 20px;
      opacity: 0;
      transform: scale(0.9);
      transition: opacity 1s ease, transform 1s ease;
    }

    .screen.active {
      opacity: 1;
      transform: scale(1);
      z-index: 10;
    }

    .screen.prev {
      opacity: 0;
      transform: scale(0.95);
      z-index: 5;
    }

    .dish-img-container {
      width: 85%;
      max-width: 320px;
      aspect-ratio: 1;
      border-radius: 30px;
      overflow: hidden;
      box-shadow: 0 20px 40px rgba(0,0,0,0.2);
      position: relative;
      background: #fff;
      margin-bottom: 20px;
    }

    .dish-img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .dish-label {
      position: absolute;
      top: 15px;
      right: 15px;
      background: rgba(255, 152, 0, 0.95);
      color: white;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: bold;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }

    .tag {
      background: linear-gradient(135deg, #ff9800, #ff5722);
      color: white;
      padding: 10px 24px;
      border-radius: 25px;
      display: inline-block;
      margin-top: 15px;
      font-weight: bold;
      font-size: 0.95rem;
      box-shadow: 0 5px 15px rgba(255, 87, 34, 0.3);
    }

    .yummy {
      position: absolute;
      bottom: 30px;
      right: 30px;
      font-size: 1.3rem;
      font-weight: bold;
      color: #ff5722;
      animation: pulse 1.5s infinite;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.15); }
    }

    .progress-bar-container {
      position: absolute;
      bottom: 45px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 8px;
      z-index: 100;
    }

    .progress-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: rgba(255, 152, 0, 0.3);
      transition: all 0.3s ease;
    }

    .progress-dot.active {
      width: 24px;
      border-radius: 4px;
      background: #ff9800;
    }

    h1 {
      font-weight: 900;
      font-size: 2.5rem;
      color: #333;
      margin-bottom: 10px;
    }

    h2 {
      font-weight: 700;
      font-size: 2rem;
      color: #333;
      margin-top: 10px;
    }

    .text-muted {
      color: #666 !important;
      font-size: 1.1rem;
    }

    .emoji-large {
      font-size: 4rem;
      margin-bottom: 20px;
      animation: bounce 2s infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    .interactive-screen h2 {
      font-size: 2.2rem;
      margin-bottom: 20px;
    }

    .time-highlight {
      color: #ff5722;
      font-size: 3rem;
      font-weight: 900;
      margin-bottom: 15px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }

    .controls {
      position: absolute;
      bottom: 15px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 8px;
      z-index: 101;
    }

    .control-btn {
      background: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(5px);
      border: 1.5px solid rgba(255, 152, 0, 0.6);
      color: #ff9800;
      padding: 4px 10px;
      border-radius: 15px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s ease;
      font-size: 0.7rem;
    }

    .control-btn:hover {
      background: #ff9800;
      color: white;
      transform: scale(1.05);
    }

    .control-btn:active {
      transform: scale(0.95);
    }

    .admin-link {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.9);
      color: #ff9800;
      padding: 8px 16px;
      border-radius: 20px;
      text-decoration: none;
      font-weight: bold;
      font-size: 0.85rem;
      z-index: 102;
      border: 2px solid #ff9800;
      transition: all 0.3s;
    }

    .admin-link:hover {
      background: #ff9800;
      color: white;
    }

    /* éŸ³æ¨‚æ§åˆ¶æŒ‰éˆ• */
    .music-control {
      position: absolute;
      top: 20px;
      left: 20px;
      background: rgba(255, 255, 255, 0.9);
      color: #ff9800;
      width: 45px;
      height: 45px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.3rem;
      z-index: 102;
      border: 2px solid #ff9800;
      cursor: pointer;
      transition: all 0.3s;
    }

    .music-control:hover {
      background: #ff9800;
      color: white;
      transform: scale(1.1);
    }

    .music-control:active {
      transform: scale(0.95);
    }
  </style>
</head>
<body>

<div class="container-wrapper">
  <div class="music-control" id="musicControl" onclick="toggleMusic()" style="display: none;">
    ğŸ”Š
  </div>
  <a href="admin.html" class="admin-link">âš™ï¸ ç®¡ç†å¾Œå°</a>

  <audio id="backgroundMusic" loop></audio>

  <!-- é–‹å ´ç•«é¢ -->
  <section class="screen active" data-index="0">
    <div class="emoji-large">ğŸ±</div>
    <h1>å¹¸ç¦é£Ÿå ‚ Menu</h1>
    <p class="text-muted">ä»Šå¤©ä¸­åˆåƒä»€éº¼ï¼Ÿ</p>
  </section>

  <!-- èœå“æœƒå‹•æ…‹ç”Ÿæˆ -->
  <div id="dishScreens"></div>

  <!-- äº’å‹•å½©è›‹ -->
  <section class="screen interactive-screen" data-index-end="1">
    <div class="emoji-large">ğŸ½ï¸</div>
    <h2>æ˜å¤©æƒ³åƒä»€éº¼ï¼Ÿ</h2>
    <p class="text-muted" style="font-size: 1.2rem;">æ­¡è¿é»é¤</p>
  </section>

  <!-- çµå°¾ -->
  <section class="screen" data-index-end="2">
    <div class="emoji-large">ğŸ‰</div>
    <div class="time-highlight">12:00 æº–æ™‚é–‹ Fun</div>
    <p class="text-muted" style="font-size: 1.3rem;">ä»Šå¤©ä¸­åˆï¼Œä¸€èµ·å¹¸ç¦ä¸€ä¸‹</p>
  </section>

  <!-- é€²åº¦æŒ‡ç¤ºå™¨ -->
  <div class="progress-bar-container" id="progressBar"></div>

  <!-- æ§åˆ¶æŒ‰éˆ• -->
  <div class="controls">
    <button class="control-btn" id="prevBtn">â† ä¸Šä¸€é </button>
    <button class="control-btn" id="pauseBtn">â¸ æš«åœ</button>
    <button class="control-btn" id="nextBtn">ä¸‹ä¸€é  â†’</button>
  </div>
</div>

<script>
  // é è¨­èœå“è³‡æ–™
  const defaultDishes = [
    {
      name: 'æ—¥å¼é›æ’',
      tag: 'é»ƒé‡‘é…¥è„†',
      category: 'ä¸»èœ',
      image: 'https://images.unsplash.com/photo-1562967914-608f82629710?w=800&h=800&fit=crop',
      showYummy: true
    },
    {
      name: 'å’–å“©è‚‰æœ«',
      tag: 'å’–å“©æ§ç™½é£¯æ®ºæ‰‹',
      category: 'ä¸»èœ',
      image: 'https://images.unsplash.com/photo-1585937421612-70a008356fbe?w=800&h=800&fit=crop',
      showYummy: false
    },
    {
      name: 'èœœæ±åœ°ç“œ',
      tag: 'å¤©ç„¶ç”œé»',
      category: 'é…èœ',
      image: 'https://images.unsplash.com/photo-1568477988743-24e161afc111?w=800&h=800&fit=crop',
      showYummy: false
    },
    {
      name: 'ç‚’é’èŠ±èœ',
      tag: 'ä½å¡é«˜çº–',
      category: 'è”¬èœ',
      image: 'https://images.unsplash.com/photo-1628773822503-930a7eaecf80?w=800&h=800&fit=crop',
      showYummy: false
    },
    {
      name: 'æ¸…ç‚’é«˜éº—èœ',
      tag: 'æ¸…ç‚’ä½è² æ“”',
      category: 'è”¬èœ',
      image: 'https://images.unsplash.com/photo-1567338217310-275c2b79c90e?w=800&h=800&fit=crop',
      showYummy: false
    }
  ];

  // è¼‰å…¥èœå“è³‡æ–™
  function loadDishes() {
    let dishes = localStorage.getItem('menuDishes');
    if (!dishes) {
      return defaultDishes;
    }
    return JSON.parse(dishes);
  }

  // å‹•æ…‹ç”Ÿæˆèœå“ç•«é¢
  function generateDishScreens() {
    const dishes = loadDishes();
    const container = document.getElementById('dishScreens');
    const progressBar = document.getElementById('progressBar');
    
    container.innerHTML = '';
    progressBar.innerHTML = '';

    // é–‹å ´ç•«é¢çš„é€²åº¦é»
    progressBar.innerHTML += '<div class="progress-dot active"></div>';

    // ç‚ºæ¯å€‹èœå“ç”Ÿæˆç•«é¢
    dishes.forEach((dish, index) => {
      const screen = document.createElement('section');
      screen.className = 'screen';
      screen.setAttribute('data-index', index + 1);
      
      screen.innerHTML = `
        <div class="dish-img-container">
          <img src="${dish.image}" alt="${dish.name}" class="dish-img">
          <div class="dish-label">${dish.category}</div>
        </div>
        <h2>${dish.name}</h2>
        <div class="tag">${dish.tag}</div>
        ${dish.showYummy ? '<div class="yummy">yummy yummy âœ¨</div>' : ''}
      `;
      
      container.appendChild(screen);
      progressBar.innerHTML += '<div class="progress-dot"></div>';
    });

    // äº’å‹•å½©è›‹å’Œçµå°¾çš„é€²åº¦é»
    progressBar.innerHTML += '<div class="progress-dot"></div>';
    progressBar.innerHTML += '<div class="progress-dot"></div>';
  }

  // åˆå§‹åŒ–é é¢
  generateDishScreens();

  // åˆå§‹åŒ–éŸ³æ¨‚
  function initializeMusic() {
    const musicEnabled = localStorage.getItem('musicEnabled') === 'true';
    const musicVolume = parseInt(localStorage.getItem('musicVolume') || '50');
    const musicData = localStorage.getItem('musicData');
    const musicControl = document.getElementById('musicControl');
    const bgMusic = document.getElementById('backgroundMusic');

    if (musicEnabled && musicData) {
      musicControl.style.display = 'flex';
      bgMusic.src = musicData;
      bgMusic.volume = musicVolume / 100;
      
      // å˜—è©¦è‡ªå‹•æ’­æ”¾ï¼ˆéœ€è¦ç”¨æˆ¶äº’å‹•ï¼‰
      const playMusic = () => {
        bgMusic.play().catch(() => {
          // è‡ªå‹•æ’­æ”¾è¢«é˜»æ“‹ï¼Œç­‰å¾…ç”¨æˆ¶é»æ“Š
          console.log('ç­‰å¾…ç”¨æˆ¶äº’å‹•ä»¥æ’­æ”¾éŸ³æ¨‚');
        });
        document.removeEventListener('click', playMusic);
        document.removeEventListener('touchstart', playMusic);
      };
      
      // ç›£è½ç¬¬ä¸€æ¬¡ç”¨æˆ¶äº’å‹•
      document.addEventListener('click', playMusic);
      document.addEventListener('touchstart', playMusic);
    }
  }

  // åˆ‡æ›éŸ³æ¨‚æ’­æ”¾/æš«åœ
  function toggleMusic() {
    const bgMusic = document.getElementById('backgroundMusic');
    const musicControl = document.getElementById('musicControl');
    
    if (bgMusic.paused) {
      bgMusic.play();
      musicControl.textContent = 'ğŸ”Š';
    } else {
      bgMusic.pause();
      musicControl.textContent = 'ğŸ”‡';
    }
  }

  initializeMusic();

  // ç²å–æ‰€æœ‰ç•«é¢
  let screens, progressDots;
  
  function initializeElements() {
    screens = document.querySelectorAll('.screen');
    progressDots = document.querySelectorAll('.progress-dot');
  }

  initializeElements();

  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const pauseBtn = document.getElementById('pauseBtn');
  
  let currentIndex = 0;
  let autoPlayInterval;
  let isPlaying = true;

  function showScreen(index) {
    screens.forEach((screen, i) => {
      screen.classList.remove('active', 'prev');
      if (i === index) {
        screen.classList.add('active');
      } else if (i < index) {
        screen.classList.add('prev');
      }
    });

    progressDots.forEach((dot, i) => {
      dot.classList.toggle('active', i === index);
    });

    currentIndex = index;
  }

  function nextScreen() {
    const nextIndex = (currentIndex + 1) % screens.length;
    showScreen(nextIndex);
  }

  function previousScreen() {
    const prevIndex = (currentIndex - 1 + screens.length) % screens.length;
    showScreen(prevIndex);
  }

  function startAutoPlay() {
    isPlaying = true;
    pauseBtn.textContent = 'â¸ æš«åœ';
    autoPlayInterval = setInterval(nextScreen, 3500);
  }

  function stopAutoPlay() {
    isPlaying = false;
    pauseBtn.textContent = 'â–¶ æ’­æ”¾';
    clearInterval(autoPlayInterval);
  }

  function toggleAutoPlay() {
    if (isPlaying) {
      stopAutoPlay();
    } else {
      startAutoPlay();
    }
  }

  // äº‹ä»¶ç›£è½
  nextBtn.addEventListener('click', () => {
    nextScreen();
    if (isPlaying) {
      stopAutoPlay();
      startAutoPlay();
    }
  });

  prevBtn.addEventListener('click', () => {
    previousScreen();
    if (isPlaying) {
      stopAutoPlay();
      startAutoPlay();
    }
  });

  pauseBtn.addEventListener('click', toggleAutoPlay);

  // é€²åº¦é»æ“Š
  progressDots.forEach((dot, index) => {
    dot.addEventListener('click', () => {
      showScreen(index);
      if (isPlaying) {
        stopAutoPlay();
        startAutoPlay();
      }
    });
  });

  // éµç›¤æ§åˆ¶
  document.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowRight') nextScreen();
    if (e.key === 'ArrowLeft') previousScreen();
    if (e.key === ' ') {
      e.preventDefault();
      toggleAutoPlay();
    }
  });

  // è§¸æ§æ»‘å‹•æ”¯æ´
  let touchStartX = 0;
  let touchEndX = 0;

  document.addEventListener('touchstart', (e) => {
    touchStartX = e.changedTouches[0].screenX;
  });

  document.addEventListener('touchend', (e) => {
    touchEndX = e.changedTouches[0].screenX;
    handleSwipe();
  });

  function handleSwipe() {
    if (touchEndX < touchStartX - 50) nextScreen();
    if (touchEndX > touchStartX + 50) previousScreen();
  }

  // é–‹å§‹è‡ªå‹•æ’­æ”¾
  startAutoPlay();
</script>

</body>
</html>